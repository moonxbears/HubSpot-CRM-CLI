import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from "react/jsx-runtime";
import { describe, expect, it } from 'vitest';
import { Text } from "../../../index.js";
import { createRenderer } from "../index.js";
import { useAssociations } from "../../../crm/index.js";
function MyComponent() {
    const { results, isLoading, error } = useAssociations({
        toObjectType: '0-1',
        properties: ['firstname', 'lastname'],
        pageLength: 10,
    });
    if (isLoading) {
        return _jsx(Text, { children: "Loading..." });
    }
    if (error) {
        return _jsx(Text, { children: "Something went wrong!" });
    }
    return (_jsx(_Fragment, { children: results.map((result) => (_jsxs(Text, { children: [result.properties.firstname, " ", result.properties.lastname] }, result.toObjectId))) }));
}
describe('mock useAssociations', () => {
    it('should provide a default mock implementation', () => {
        const { render } = createRenderer('crm.record.tab');
        const { findAll } = render(_jsx(MyComponent, {}));
        const textNodes = findAll(Text);
        expect(textNodes.length).toEqual(1);
        expect(textNodes[0].text).toEqual('fake_firstname fake_lastname');
    });
    it('should allow mocking the next function result', () => {
        const { render, mocks } = createRenderer('crm.record.tab');
        mocks.useAssociations.nextResult({
            results: [],
            error: new Error('Something went wrong!'),
            isLoading: false,
            pagination: {
                hasNextPage: false,
                hasPreviousPage: false,
                currentPage: 1,
                pageSize: 10,
                nextPage: () => { },
                previousPage: () => { },
                reset: () => { },
            },
        });
        const { find } = render(_jsx(MyComponent, {}));
        expect(find(Text).text).toEqual('Something went wrong!');
    });
});
